version: '3'
services:
  vexination-api:
    image: ghcr.io/trustification/trust:latest
    expose:
      - "$VEXINATION_API_PORT"
    ports:
      - "$VEXINATION_API_PORT:8080"
    command: vexination api --devmode --storage-endpoint http://minio:9000
  vexination-indexer:
    image: ghcr.io/trustification/trust:latest
    command: vexination indexer --devmode --storage-endpoint http://minio:9000 --kafka-bootstrap-servers kafka:9094
  vexination-walker:
    image: ghcr.io/trustification/trust:latest
    command: vexination walker --devmode --source https://www.redhat.com/.well-known/csaf/provider-metadata.json -3 --storage-endpoint http://minio:9000
  bombastic-api:
    image: ghcr.io/trustification/trust:latest
    expose:
      - "$BOMBASTIC_API_PORT"
    ports:
      - "$BOMBASTIC_API_PORT:8080"
    command: bombastic api --devmode --storage-endpoint http://minio:9000
  bombastic-indexer:
    image: ghcr.io/trustification/trust:latest
    command: bombastic indexer --devmode --storage-endpoint http://minio:9000 --kafka-bootstrap-servers kafka:9094
  spog-api:
    image: ghcr.io/trustification/trust:latest
    expose:
      - "$SPOG_API_PORT"
    ports:
      - "$SPOG_API_PORT:8088"
    command: spog api --devmode --storage-endpoint http://minio:9000
